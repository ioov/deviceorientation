<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>orientation</title>
	<style>
	#box {
		font-size: 30px;
		margin-bottom: 20px;
	}

	#compass {
		margin: 0 auto;
		width: 90%;
		background-image: url(http://p1.so.qhmsg.com/bdr/_240_/t01d75890a9da12ed56.jpg);
		background-size: cover;
		transform-origin: center center;
		-moz-transform-origin: center center;
		-webkit-transform-origin: center center;
	}
	</style>
</head>

<body>
	<div id="box"></div>
	<div id="compass"></div>
	<script>
	var box = document.getElementById("box"),
		compass = document.getElementById('compass'),
		w = compass.offsetWidth;

	compass.style.height = w + 'px';

	if (window.DeviceOrientationEvent) {

		window.addEventListener('deviceorientation', function(event) {
			var json = {
				alpha: event.alpha
				webkitCompassHeading: event.webkitCompassHeading
			}
			box.innerHTML = JSON.stringify(json);

			var alpha;
			if (event.webkitCompassHeading) {
				alpha = event.webkitCompassHeading; // iOS 使用 event.webkitCompassHeading
				compass.style.WebkitTransform = 'rotate(-' + alpha + 'deg)';
				show.innerHTML = alpha;
			} else {
				alpha = event.alpha;
				webkitAlpha = alpha;
				if (!window.chrome) {
					webkitAlpha = alpha - 270;
				}
			}

			compass.style.Transform = 'rotate(' + alpha + 'deg)';
			compass.style.WebkitTransform = 'rotate(' + webkitAlpha + 'deg)';
		});

	} else {
		alert("设备不支持deviceorientation事件")
	}
	</script>
</body>

</html>
